<!-- ver-cursos-component.html -->
<div class="super-container">
  <app-sidebar-component></app-sidebar-component>
  <div class="cursos-container">
    <!-- Header Section -->
    <div class="cursos-header">
      <div class="header-content">
        <h1 class="page-title">Explora Cursos</h1>
        <p class="page-subtitle">Descubre y aprende con los mejores cursos de programación</p>
      </div>
      <div class="header-stats">
        <div class="stat-badge">
          <span class="stat-number">{{ totalCourses }}</span>
          <span class="stat-label">Cursos</span>
        </div>
        <div class="stat-badge">
          <span class="stat-number">{{ totalStudents }}</span>
          <span class="stat-label">Estudiantes</span>
        </div>
      </div>
    </div>

    <!-- Search and Filters Section -->
    <div class="search-filter-section">
      <!-- Search Bar -->
      <div class="search-container">
        <div class="search-icon">
          <svg
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <circle cx="11" cy="11" r="8" />
            <path d="m21 21-4.35-4.35" />
          </svg>
        </div>
        <input
          type="text"
          class="search-input"
          placeholder="Buscar cursos por nombre, tecnología..."
          [(ngModel)]="searchTerm"
          (input)="filterCourses()"
        />
        <button class="search-clear" *ngIf="searchTerm" (click)="clearSearch()">
          <svg
            width="16"
            height="16"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <line x1="18" y1="6" x2="6" y2="18" />
            <line x1="6" y1="6" x2="18" y2="18" />
          </svg>
        </button>
      </div>

      <!-- Filters -->
      <div class="filters-container">
        <!-- Level Filter -->
        <div class="filter-group">
          <button
            class="filter-btn"
            [class.active]="showLevelFilter"
            (click)="toggleFilter('level')"
          >
            <svg
              width="18"
              height="18"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <polygon
                points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"
              />
            </svg>
            Nivel
            <svg
              class="chevron"
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <polyline points="6 9 12 15 18 9" />
            </svg>
          </button>
          <div class="filter-dropdown" *ngIf="showLevelFilter">
            <label class="filter-option" *ngFor="let level of levels">
              <input
                type="checkbox"
                [value]="level"
                [checked]="selectedLevels.includes(level)"
                (change)="toggleLevel(level)"
              />
              <span class="checkbox-custom"></span>
              <span class="option-text">{{ level }}</span>
            </label>
          </div>
        </div>

        <!-- Category Filter -->
        <div class="filter-group">
          <button
            class="filter-btn"
            [class.active]="showCategoryFilter"
            (click)="toggleFilter('category')"
          >
            <svg
              width="18"
              height="18"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z" />
              <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z" />
            </svg>
            Categoría
            <svg
              class="chevron"
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <polyline points="6 9 12 15 18 9" />
            </svg>
          </button>
          <div class="filter-dropdown" *ngIf="showCategoryFilter">
            <label class="filter-option" *ngFor="let category of categories">
              <input
                type="checkbox"
                [value]="category"
                [checked]="selectedCategories.includes(category)"
                (change)="toggleCategory(category)"
              />
              <span class="checkbox-custom"></span>
              <span class="option-text">{{ category }}</span>
            </label>
          </div>
        </div>

        <!-- Duration Filter -->
        <div class="filter-group">
          <button
            class="filter-btn"
            [class.active]="showDurationFilter"
            (click)="toggleFilter('duration')"
          >
            <svg
              width="18"
              height="18"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <circle cx="12" cy="12" r="10" />
              <polyline points="12 6 12 12 16 14" />
            </svg>
            Duración
            <svg
              class="chevron"
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <polyline points="6 9 12 15 18 9" />
            </svg>
          </button>
          <div class="filter-dropdown" *ngIf="showDurationFilter">
            <label class="filter-option" *ngFor="let duration of durations">
              <input
                type="checkbox"
                [value]="duration"
                [checked]="selectedDurations.includes(duration)"
                (change)="toggleDuration(duration)"
              />
              <span class="checkbox-custom"></span>
              <span class="option-text">{{ duration }}</span>
            </label>
          </div>
        </div>

        <!-- Sort -->
        <div class="filter-group">
          <button class="filter-btn" [class.active]="showSortFilter" (click)="toggleFilter('sort')">
            <svg
              width="18"
              height="18"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <line x1="4" y1="6" x2="20" y2="6" />
              <line x1="4" y1="12" x2="16" y2="12" />
              <line x1="4" y1="18" x2="12" y2="18" />
            </svg>
            Ordenar
            <svg
              class="chevron"
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <polyline points="6 9 12 15 18 9" />
            </svg>
          </button>
          <div class="filter-dropdown" *ngIf="showSortFilter">
            <button
              class="sort-option"
              *ngFor="let sort of sortOptions"
              [class.active]="selectedSort === sort.value"
              (click)="selectSort(sort.value)"
            >
              {{ sort.label }}
            </button>
          </div>
        </div>

        <!-- Clear Filters -->
        <button class="clear-filters-btn" *ngIf="hasActiveFilters()" (click)="clearAllFilters()">
          <svg
            width="18"
            height="18"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <polyline points="3 6 5 6 21 6" />
            <path
              d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"
            />
          </svg>
          Limpiar
        </button>
      </div>
    </div>

    <!-- Active Filters Tags -->
    <div class="active-filters" *ngIf="hasActiveFilters()">
      <span class="filter-tag" *ngFor="let level of selectedLevels" (click)="toggleLevel(level)">
        {{ level }}
        <svg
          width="14"
          height="14"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <line x1="18" y1="6" x2="6" y2="18" />
          <line x1="6" y1="6" x2="18" y2="18" />
        </svg>
      </span>
      <span
        class="filter-tag"
        *ngFor="let category of selectedCategories"
        (click)="toggleCategory(category)"
      >
        {{ category }}
        <svg
          width="14"
          height="14"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <line x1="18" y1="6" x2="6" y2="18" />
          <line x1="6" y1="6" x2="18" y2="18" />
        </svg>
      </span>
      <span
        class="filter-tag"
        *ngFor="let duration of selectedDurations"
        (click)="toggleDuration(duration)"
      >
        {{ duration }}
        <svg
          width="14"
          height="14"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <line x1="18" y1="6" x2="6" y2="18" />
          <line x1="6" y1="6" x2="18" y2="18" />
        </svg>
      </span>
    </div>

    <!-- Results Count -->
    <div class="results-header">
      <h3 class="results-count">
        {{ filteredCourses.length }}
        {{ filteredCourses.length === 1 ? 'curso encontrado' : 'cursos encontrados' }}
      </h3>
    </div>

    <!-- Courses Grid -->
    <div class="courses-grid" *ngIf="filteredCourses.length > 0">
      <div
        class="course-card"
        *ngFor="let course of filteredCourses; let i = index"
        [style.animation-delay.ms]="i * 50"
      >
        <div class="course-image-container">
          <img [src]="course.image" [alt]="course.title" class="course-image" />
          <div class="course-overlay">
            <button class="play-btn">
              <svg width="32" height="32" viewBox="0 0 24 24" fill="white">
                <polygon points="5 3 19 12 5 21 5 3" />
              </svg>
            </button>
          </div>
          <span class="course-level-badge" [attr.data-level]="course.level">{{
            course.level
          }}</span>
          <span class="course-new-badge" *ngIf="course.isNew">NUEVO</span>
        </div>
        <div class="course-content">
          <div class="course-header">
            <h3 class="course-title">{{ course.title }}</h3>
            <div class="course-rating">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="#fbbf24">
                <polygon
                  points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"
                />
              </svg>
              <span>{{ course.rating }}</span>
            </div>
          </div>
          <div class="course-tags">
            <span class="course-tag" *ngFor="let tag of course.tags">{{ tag }}</span>
          </div>
          <div class="course-meta">
            <div class="meta-item">
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <circle cx="12" cy="12" r="10" />
                <polyline points="12 6 12 12 16 14" />
              </svg>
              <span>{{ course.duration }}</span>
            </div>
            <div class="meta-item">
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" />
                <circle cx="9" cy="7" r="4" />
                <path d="M23 21v-2a4 4 0 0 0-3-3.87" />
                <path d="M16 3.13a4 4 0 0 1 0 7.75" />
              </svg>
              <span>{{ course.students!.toLocaleString() }}</span>
            </div>
          </div>
          <button class="course-btn" (click)="goToCourse(course.id)">
            Ver Curso
            <svg
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <line x1="5" y1="12" x2="19" y2="12" />
              <polyline points="12 5 19 12 12 19" />
            </svg>
          </button>
        </div>
      </div>
    </div>

    <!-- Empty State -->
    <div class="empty-state" *ngIf="filteredCourses.length === 0">
      <div class="empty-icon">
        <svg
          width="120"
          height="120"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="1.5"
        >
          <circle cx="11" cy="11" r="8" />
          <path d="m21 21-4.35-4.35" />
        </svg>
      </div>
      <h3 class="empty-title">No se encontraron cursos</h3>
      <p class="empty-text">Intenta ajustar tus filtros o buscar con otros términos</p>
      <button class="empty-btn" (click)="clearAllFilters()">Limpiar filtros</button>
    </div>
  </div>
</div>
